{
	"schemaVersion": 1,
	"stackId": "branch-creation-1kda6g",
	"generatedAt": "2026-02-19T20:58:38.770Z",
	"planMarkdownPath": ".stacked/plans/branch-creation-1kda6g.md",
	"stages": [
		{
			"id": "stage-1",
			"stageName": "Implementation session schema and state transitions",
			"stageDescription": "Add typed implementation session persistence and atomic stack/stage status transition helpers so start-flow state can be recorded and resumed safely.",
			"markdownSection": {
				"heading": "Execution steps",
				"anchor": "execution-steps"
			}
		},
		{
			"id": "stage-2",
			"stageName": "Branch naming and default base branch resolution",
			"stageDescription": "Implement deterministic git-safe naming using feature/stage metadata and resolve the repository default base branch with reliable fallback behavior.",
			"markdownSection": {
				"heading": "Execution steps",
				"anchor": "execution-steps"
			}
		},
		{
			"id": "stage-3",
			"stageName": "Idempotent worktree orchestration service",
			"stageDescription": "Build server-side git service that creates or reuses stage 1 branch/worktree and recovers partial-existing resource states without destructive actions.",
			"markdownSection": {
				"heading": "Execution steps",
				"anchor": "execution-steps"
			}
		},
		{
			"id": "stage-4",
			"stageName": "Directory-aware implementation agent bootstrap",
			"stageDescription": "Extend OpenCode session operations to run in the stage 1 worktree and auto-seed a stage-focused implementation prompt with reuse semantics.",
			"markdownSection": {
				"heading": "Execution steps",
				"anchor": "execution-steps"
			}
		},
		{
			"id": "stage-5",
			"stageName": "Start endpoint orchestration contract",
			"stageDescription": "Add POST start API that validates prerequisites, orchestrates worktree/session setup, updates statuses, and returns explicit created-versus-reused result flags.",
			"markdownSection": {
				"heading": "Execution steps",
				"anchor": "execution-steps"
			}
		},
		{
			"id": "stage-6",
			"stageName": "Feature detail UI start action integration",
			"stageDescription": "Add UI-only Start feature trigger with disabled/loading/success/error states and data refresh to reflect started and in-progress stage state.",
			"markdownSection": {
				"heading": "Execution steps",
				"anchor": "execution-steps"
			}
		},
		{
			"id": "stage-7",
			"stageName": "Validation matrix and quality gate",
			"stageDescription": "Verify fresh, resume, recovery, and failure scenarios, then complete typecheck and build gates before marking the feature ready.",
			"markdownSection": {
				"heading": "Execution steps",
				"anchor": "execution-steps"
			}
		}
	]
}
