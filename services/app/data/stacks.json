{
	"version": 2,
	"stacks": [
		{
			"id": "branch-creation-1kda6g",
			"status": "planned",
			"stages": [
				{
					"id": "stage-1",
					"title": "Implementation session schema and state transitions",
					"details": "Add typed implementation session persistence and atomic stack/stage status transition helpers so start-flow state can be recorded and resumed safely.",
					"status": "not-started"
				},
				{
					"id": "stage-2",
					"title": "Branch naming and default base branch resolution",
					"details": "Implement deterministic git-safe naming using feature/stage metadata and resolve the repository default base branch with reliable fallback behavior.",
					"status": "not-started"
				},
				{
					"id": "stage-3",
					"title": "Idempotent worktree orchestration service",
					"details": "Build server-side git service that creates or reuses stage 1 branch/worktree and recovers partial-existing resource states without destructive actions.",
					"status": "not-started"
				},
				{
					"id": "stage-4",
					"title": "Directory-aware implementation agent bootstrap",
					"details": "Extend OpenCode session operations to run in the stage 1 worktree and auto-seed a stage-focused implementation prompt with reuse semantics.",
					"status": "not-started"
				},
				{
					"id": "stage-5",
					"title": "Start endpoint orchestration contract",
					"details": "Add POST start API that validates prerequisites, orchestrates worktree/session setup, updates statuses, and returns explicit created-versus-reused result flags.",
					"status": "not-started"
				},
				{
					"id": "stage-6",
					"title": "Feature detail UI start action integration",
					"details": "Add UI-only Start feature trigger with disabled/loading/success/error states and data refresh to reflect started and in-progress stage state.",
					"status": "not-started"
				},
				{
					"id": "stage-7",
					"title": "Validation matrix and quality gate",
					"details": "Verify fresh, resume, recovery, and failure scenarios, then complete typecheck and build gates before marking the feature ready.",
					"status": "not-started"
				}
			],
			"name": "branch creation",
			"notes": "when a feature has been created and the stages set up, I want to instruct the agent to “start” a feature at which point a new git worktree will be created and a new agent session started to immediately implement stage 1",
			"type": "feature"
		},
		{
			"id": "branch-diff-cpbrce",
			"status": "started",
			"stages": [
				{
					"id": "stage-1",
					"title": "Diff domain and API contract",
					"details": "Define structured stage diff types, implement server diff resolution/parsing with previous-stage baseline logic, and expose GET /api/stacks/[id]/stages/[stageId]/diff with deterministic status/error mapping.",
					"status": "review-ready",
					"pullRequest": {
						"number": 1,
						"title": "feat: add stage diff domain model and API endpoint",
						"state": "OPEN",
						"isDraft": false,
						"url": "https://github.com/mlawd/stackdiff/pull/1",
						"updatedAt": "2026-02-20T11:26:04Z"
					}
				},
				{
					"id": "stage-2",
					"title": "Stage diffability metadata",
					"details": "Augment feature page server load with per-stage runtime metadata indicating whether a stage has a diffable branch/worktree and why it may be unavailable.",
					"status": "review-ready",
					"pullRequest": {
						"number": 2,
						"title": "feature: Branch diff - 2: Stage diffability metadata",
						"state": "OPEN",
						"isDraft": false,
						"url": "https://github.com/mlawd/stackdiff/pull/2",
						"updatedAt": "2026-02-20T12:19:07Z"
					}
				},
				{
					"id": "stage-3",
					"title": "Slide-out panel shell and fetch lifecycle",
					"details": "Add clickable behavior only for diffable stages, implement panel open/close mechanics, and wire lazy loading/error/empty handling for stage diff API calls.",
					"status": "review-ready",
					"pullRequest": {
						"number": 3,
						"title": "feature: Branch diff - 3: Slide-out panel shell and fetch lifecycle",
						"state": "OPEN",
						"isDraft": false,
						"url": "https://github.com/mlawd/stackdiff/pull/3",
						"updatedAt": "2026-02-20T12:25:23Z"
					}
				},
				{
					"id": "stage-4",
					"title": "Structured side-by-side diff renderer",
					"details": "Build reusable Svelte diff components that render files, hunks, and paired lines side-by-side from structured payload data with stable per-line identifiers.",
					"status": "review-ready",
					"pullRequest": {
						"number": 4,
						"title": "feature: Branch diff - 4: Structured side-by-side diff renderer",
						"state": "OPEN",
						"isDraft": false,
						"url": "https://github.com/mlawd/stackdiff/pull/4",
						"updatedAt": "2026-02-20T12:31:32Z"
					}
				},
				{
					"id": "stage-5",
					"title": "UX polish and performance guardrails",
					"details": "Add file collapse/navigation, truncation safeguards for large diffs, keyboard/mobile panel behavior improvements, and optional syntax highlighting integration.",
					"status": "review-ready",
					"pullRequest": {
						"number": 5,
						"title": "feature: Branch diff - 5: UX polish and performance guardrails",
						"state": "OPEN",
						"isDraft": false,
						"url": "https://github.com/mlawd/stackdiff/pull/5",
						"updatedAt": "2026-02-20T12:51:27Z"
					}
				},
				{
					"id": "stage-6",
					"title": "Hardening and validation",
					"details": "Add unit and route-level tests for diff resolution and API statuses, verify edge-case handling, and run full typecheck/build validation.",
					"status": "review-ready",
					"pullRequest": {
						"number": 6,
						"title": "feature: Branch diff - 6: Hardening and validation",
						"state": "OPEN",
						"isDraft": false,
						"url": "https://github.com/mlawd/stackdiff/pull/6",
						"updatedAt": "2026-02-20T13:51:10Z"
					}
				},
				{
					"id": "stage-7",
					"title": "Immediate v2 line selection and AI chat",
					"details": "Implement line selection over stable diff line IDs and add a chat endpoint that accepts selected diff ranges to start focused AI discussion immediately after v1.",
					"status": "review-ready",
					"pullRequest": {
						"number": 9,
						"title": "feature: Branch diff - 7: Immediate v2 line selection and AI chat",
						"state": "OPEN",
						"isDraft": false,
						"url": "https://github.com/mlawd/stackdiff/pull/9",
						"updatedAt": "2026-02-20T14:23:03Z"
					}
				}
			],
			"name": "Branch diff",
			"notes": "I want to be able to view changes made in a branch/stage. The way I want this to work is that if I click on a stage in the feature page, a panel slides out showing a side-by-side git diff of the changes introduced by the stage's branch",
			"type": "feature"
		},
		{
			"id": "merging-the-entire-stack-feature-rqh4z2",
			"status": "planned",
			"stages": [
				{
					"id": "stage-1",
					"title": "Define merge and checks contracts",
					"details": "Add/extend TypeScript domain contracts for checks summary, merge readiness blockers, merge result payloads, and persisted merge metadata so downstream services and routes share deterministic typed interfaces.",
					"status": "not-started"
				},
				{
					"id": "stage-2",
					"title": "Implement strict PR checks resolver",
					"details": "Build a server-side GitHub checks resolver that fetches stage PR check contexts/runs via gh, normalizes states, counts passed/total/pending, and marks any non-pass or lookup failure as blocking.",
					"status": "not-started"
				},
				{
					"id": "stage-3",
					"title": "Build stack merge readiness evaluator",
					"details": "Create readiness logic that requires all stages done, all stage PRs present, and all checks passing; emit structured blocker reasons and aggregate check summary for API and UI consumption.",
					"status": "not-started"
				},
				{
					"id": "stage-4",
					"title": "Implement squash merge orchestration",
					"details": "Add merge service that revalidates readiness at execution time, resolves target default branch and source stage branch, performs isolated squash merge, writes required commit subject/body format, and pushes target branch.",
					"status": "not-started"
				},
				{
					"id": "stage-5",
					"title": "Add post-merge automatic cleanup",
					"details": "Implement automatic cleanup for stage PRs, local/remote stage branches, and stage worktrees after successful merge, returning structured cleanup results with non-fatal warnings.",
					"status": "not-started"
				},
				{
					"id": "stage-6",
					"title": "Expose merge readiness and execution APIs",
					"details": "Create GET/POST /api/stacks/[id]/merge handlers that return readiness data, blockers, checks summary, and merge execution results with stable status code/error mapping.",
					"status": "not-started"
				},
				{
					"id": "stage-7",
					"title": "Add feature list checks summary note",
					"details": "Integrate per-stack aggregated checks summary into home page data and render `X/Y checks passed (Z pending)` beside existing type/status pills with safe fallbacks.",
					"status": "not-started"
				},
				{
					"id": "stage-8",
					"title": "Integrate stack-page merge action UX",
					"details": "Add Merge feature button on stack page with eligibility gating, blocker rendering, execution flow, and post-merge success/cleanup presentation.",
					"status": "not-started"
				},
				{
					"id": "stage-9",
					"title": "Validate behavior and harden edge cases",
					"details": "Cover strict non-pass check gating, readiness race conditions, protected branch push errors, cleanup partial failures, and run check/build validation gates before completion.",
					"status": "not-started"
				}
			],
			"name": "Merging the entire stack/feature",
			"notes": "As a user, I want to be able to merge the entire feature in one go. Ideally creating a single squash merge with feat|fix|chore: feature name as the commit message, with detail for each branch that has made up the commit.",
			"type": "feature"
		},
		{
			"id": "refactor-feature-page-3ckfas",
			"status": "planned",
			"stages": [
				{
					"id": "stage-1",
					"title": "Baseline behavior and interface contracts",
					"details": "Capture current feature-page behavior and define typed prop/composable contracts so extraction can proceed with strict parity and low regression risk.",
					"status": "not-started"
				},
				{
					"id": "stage-2",
					"title": "Extract top-level page sections",
					"details": "Split header, tabs, plan panel, and stack panel into standalone components while retaining existing state and actions in the page orchestrator.",
					"status": "not-started"
				},
				{
					"id": "stage-3",
					"title": "Isolate implementation stages UI",
					"details": "Create ImplementationStagesPanel and ImplementationStageRow to move the highest-churn stage list/row markup and interactions out of the page file.",
					"status": "not-started"
				},
				{
					"id": "stage-4",
					"title": "Isolate stage diff drawer UI",
					"details": "Extract the full stage diff drawer, sidebar, and main area into dedicated components and relocate drawer-local styles while preserving interaction parity.",
					"status": "not-started"
				},
				{
					"id": "stage-5",
					"title": "Extract composables and thin page orchestrator",
					"details": "Move start flow, runtime polling, diff lifecycle, and selection/chat logic into typed Svelte 5 composables, leaving +page.svelte as composition wiring only.",
					"status": "not-started"
				},
				{
					"id": "stage-6",
					"title": "Parity validation and build verification",
					"details": "Run manual parity checks for all key flows, then execute check and build gates, fixing issues while keeping refactor scope strictly parity-only.",
					"status": "not-started"
				}
			],
			"name": "Refactor feature page",
			"notes": "I want to refactor the feature page.\n\nIt appears to be one big component at the moment, which is causing massive merge conflicts every time. I want to split it up into different components and abstract functionality out into hooks file where they make sense",
			"type": "chore"
		}
	],
	"planningSessions": [
		{
			"id": "session-pnd3eo32",
			"stackId": "branch-creation-1kda6g",
			"createdAt": "2026-02-19T19:25:54.639Z",
			"updatedAt": "2026-02-19T20:58:38.784Z",
			"opencodeSessionId": "ses_388a24fa9ffeCixBNFRS9ftByE",
			"seededAt": "2026-02-19T19:26:16.378Z",
			"savedPlanPath": ".stacked/plans/branch-creation-1kda6g.md",
			"savedStageConfigPath": ".stacked/plans/branch-creation-1kda6g.stages.json",
			"savedAt": "2026-02-19T20:58:38.784Z"
		},
		{
			"id": "session-e8g4p19b",
			"stackId": "branch-diff-cpbrce",
			"createdAt": "2026-02-19T21:53:16.100Z",
			"updatedAt": "2026-02-19T22:26:44.713Z",
			"opencodeSessionId": "ses_3881b66a8ffepKSRqggYbxRCwb",
			"savedPlanPath": ".stacked/plans/branch-diff-cpbrce.md",
			"savedStageConfigPath": ".stacked/plans/branch-diff-cpbrce.stages.json",
			"savedAt": "2026-02-19T22:26:44.713Z"
		},
		{
			"id": "session-dnr54dgt",
			"stackId": "merging-the-entire-stack-feature-rqh4z2",
			"createdAt": "2026-02-20T13:13:01.472Z",
			"updatedAt": "2026-02-20T13:48:29.422Z",
			"opencodeSessionId": "ses_384d156dbffeIckrClaChUOAtY",
			"savedPlanPath": ".stacked/plans/merging-the-entire-stack-feature-rqh4z2.md",
			"savedStageConfigPath": ".stacked/plans/merging-the-entire-stack-feature-rqh4z2.stages.json",
			"savedAt": "2026-02-20T13:48:29.422Z"
		},
		{
			"id": "session-w3l4v274",
			"stackId": "refactor-feature-page-3ckfas",
			"createdAt": "2026-02-20T15:16:23.056Z",
			"updatedAt": "2026-02-20T16:03:59.423Z",
			"opencodeSessionId": "ses_384606657ffey09J8P5mdenOnV",
			"savedPlanPath": ".stacked/plans/refactor-feature-page-3ckfas.md",
			"savedStageConfigPath": ".stacked/plans/refactor-feature-page-3ckfas.stages.json",
			"savedAt": "2026-02-20T16:03:59.423Z"
		}
	],
	"implementationSessions": []
}
