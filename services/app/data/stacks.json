{
	"version": 2,
	"stacks": [
		{
			"id": "merging-the-entire-stack-feature-rqh4z2",
			"status": "planned",
			"stages": [
				{
					"id": "stage-1",
					"title": "Define merge and checks contracts",
					"details": "Add/extend TypeScript domain contracts for checks summary, merge readiness blockers, merge result payloads, and persisted merge metadata so downstream services and routes share deterministic typed interfaces.",
					"status": "not-started"
				},
				{
					"id": "stage-2",
					"title": "Implement strict PR checks resolver",
					"details": "Build a server-side GitHub checks resolver that fetches stage PR check contexts/runs via gh, normalizes states, counts passed/total/pending, and marks any non-pass or lookup failure as blocking.",
					"status": "not-started"
				},
				{
					"id": "stage-3",
					"title": "Build stack merge readiness evaluator",
					"details": "Create readiness logic that requires all stages done, all stage PRs present, and all checks passing; emit structured blocker reasons and aggregate check summary for API and UI consumption.",
					"status": "not-started"
				},
				{
					"id": "stage-4",
					"title": "Implement squash merge orchestration",
					"details": "Add merge service that revalidates readiness at execution time, resolves target default branch and source stage branch, performs isolated squash merge, writes required commit subject/body format, and pushes target branch.",
					"status": "not-started"
				},
				{
					"id": "stage-5",
					"title": "Add post-merge automatic cleanup",
					"details": "Implement automatic cleanup for stage PRs, local/remote stage branches, and stage worktrees after successful merge, returning structured cleanup results with non-fatal warnings.",
					"status": "not-started"
				},
				{
					"id": "stage-6",
					"title": "Expose merge readiness and execution APIs",
					"details": "Create GET/POST /api/stacks/[id]/merge handlers that return readiness data, blockers, checks summary, and merge execution results with stable status code/error mapping.",
					"status": "not-started"
				},
				{
					"id": "stage-7",
					"title": "Add feature list checks summary note",
					"details": "Integrate per-stack aggregated checks summary into home page data and render `X/Y checks passed (Z pending)` beside existing type/status pills with safe fallbacks.",
					"status": "not-started"
				},
				{
					"id": "stage-8",
					"title": "Integrate stack-page merge action UX",
					"details": "Add Merge feature button on stack page with eligibility gating, blocker rendering, execution flow, and post-merge success/cleanup presentation.",
					"status": "not-started"
				},
				{
					"id": "stage-9",
					"title": "Validate behavior and harden edge cases",
					"details": "Cover strict non-pass check gating, readiness race conditions, protected branch push errors, cleanup partial failures, and run check/build validation gates before completion.",
					"status": "not-started"
				}
			],
			"name": "Merging the entire stack/feature",
			"notes": "As a user, I want to be able to merge the entire feature in one go. Ideally creating a single squash merge with feat|fix|chore: feature name as the commit message, with detail for each branch that has made up the commit.",
			"type": "feature"
		},
		{
			"id": "refactor-feature-page-3ckfas",
			"status": "started",
			"stages": [
				{
					"id": "stage-1",
					"title": "Baseline behavior and interface contracts",
					"details": "Capture current feature-page behavior and define typed prop/composable contracts so extraction can proceed with strict parity and low regression risk.",
					"status": "review-ready",
					"pullRequest": {
						"number": 11,
						"title": "chore: Refactor feature page - 1: Baseline behavior and interface contracts",
						"state": "OPEN",
						"isDraft": false,
						"url": "https://github.com/mlawd/stackdiff/pull/11",
						"updatedAt": "2026-02-20T16:16:08Z"
					}
				},
				{
					"id": "stage-2",
					"title": "Extract top-level page sections",
					"details": "Split header, tabs, plan panel, and stack panel into standalone components while retaining existing state and actions in the page orchestrator.",
					"status": "not-started"
				},
				{
					"id": "stage-3",
					"title": "Isolate implementation stages UI",
					"details": "Create ImplementationStagesPanel and ImplementationStageRow to move the highest-churn stage list/row markup and interactions out of the page file.",
					"status": "not-started"
				},
				{
					"id": "stage-4",
					"title": "Isolate stage diff drawer UI",
					"details": "Extract the full stage diff drawer, sidebar, and main area into dedicated components and relocate drawer-local styles while preserving interaction parity.",
					"status": "not-started"
				},
				{
					"id": "stage-5",
					"title": "Extract composables and thin page orchestrator",
					"details": "Move start flow, runtime polling, diff lifecycle, and selection/chat logic into typed Svelte 5 composables, leaving +page.svelte as composition wiring only.",
					"status": "not-started"
				},
				{
					"id": "stage-6",
					"title": "Parity validation and build verification",
					"details": "Run manual parity checks for all key flows, then execute check and build gates, fixing issues while keeping refactor scope strictly parity-only.",
					"status": "not-started"
				}
			],
			"name": "Refactor feature page",
			"notes": "I want to refactor the feature page.\n\nIt appears to be one big component at the moment, which is causing massive merge conflicts every time. I want to split it up into different components and abstract functionality out into hooks file where they make sense",
			"type": "chore"
		}
	],
	"planningSessions": [
		{
			"id": "session-pnd3eo32",
			"stackId": "branch-creation-1kda6g",
			"createdAt": "2026-02-19T19:25:54.639Z",
			"updatedAt": "2026-02-19T20:58:38.784Z",
			"opencodeSessionId": "ses_388a24fa9ffeCixBNFRS9ftByE",
			"seededAt": "2026-02-19T19:26:16.378Z",
			"savedPlanPath": ".stacked/plans/branch-creation-1kda6g.md",
			"savedStageConfigPath": ".stacked/plans/branch-creation-1kda6g.stages.json",
			"savedAt": "2026-02-19T20:58:38.784Z"
		},
		{
			"id": "session-e8g4p19b",
			"stackId": "branch-diff-cpbrce",
			"createdAt": "2026-02-19T21:53:16.100Z",
			"updatedAt": "2026-02-19T22:26:44.713Z",
			"opencodeSessionId": "ses_3881b66a8ffepKSRqggYbxRCwb",
			"savedPlanPath": ".stacked/plans/branch-diff-cpbrce.md",
			"savedStageConfigPath": ".stacked/plans/branch-diff-cpbrce.stages.json",
			"savedAt": "2026-02-19T22:26:44.713Z"
		},
		{
			"id": "session-dnr54dgt",
			"stackId": "merging-the-entire-stack-feature-rqh4z2",
			"createdAt": "2026-02-20T13:13:01.472Z",
			"updatedAt": "2026-02-20T13:48:29.422Z",
			"opencodeSessionId": "ses_384d156dbffeIckrClaChUOAtY",
			"savedPlanPath": ".stacked/plans/merging-the-entire-stack-feature-rqh4z2.md",
			"savedStageConfigPath": ".stacked/plans/merging-the-entire-stack-feature-rqh4z2.stages.json",
			"savedAt": "2026-02-20T13:48:29.422Z"
		},
		{
			"id": "session-w3l4v274",
			"stackId": "refactor-feature-page-3ckfas",
			"createdAt": "2026-02-20T15:16:23.056Z",
			"updatedAt": "2026-02-20T16:03:59.423Z",
			"opencodeSessionId": "ses_384606657ffey09J8P5mdenOnV",
			"savedPlanPath": ".stacked/plans/refactor-feature-page-3ckfas.md",
			"savedStageConfigPath": ".stacked/plans/refactor-feature-page-3ckfas.stages.json",
			"savedAt": "2026-02-20T16:03:59.423Z"
		}
	],
	"implementationSessions": [
		{
			"id": "impl-u8ym1lnd",
			"stackId": "refactor-feature-page-3ckfas",
			"stageId": "stage-1",
			"branchName": "chore/refactor-feature-page/1-baseline-behavior-and-interf",
			"worktreePathKey": ".stacked/worktrees/chore-refactor-feature-page-1-baseline-behavior-and-interf",
			"createdAt": "2026-02-20T16:09:57.906Z",
			"updatedAt": "2026-02-20T16:09:58.007Z",
			"opencodeSessionId": "ses_3842f5815ffeF7vUBc0vrs0tHH"
		}
	]
}