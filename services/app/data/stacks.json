{
	"version": 2,
	"stacks": [
		{
			"id": "branch-creation-1kda6g",
			"status": "planned",
			"stages": [
				{
					"id": "stage-1",
					"title": "Implementation session schema and state transitions",
					"details": "Add typed implementation session persistence and atomic stack/stage status transition helpers so start-flow state can be recorded and resumed safely.",
					"status": "not-started"
				},
				{
					"id": "stage-2",
					"title": "Branch naming and default base branch resolution",
					"details": "Implement deterministic git-safe naming using feature/stage metadata and resolve the repository default base branch with reliable fallback behavior.",
					"status": "not-started"
				},
				{
					"id": "stage-3",
					"title": "Idempotent worktree orchestration service",
					"details": "Build server-side git service that creates or reuses stage 1 branch/worktree and recovers partial-existing resource states without destructive actions.",
					"status": "not-started"
				},
				{
					"id": "stage-4",
					"title": "Directory-aware implementation agent bootstrap",
					"details": "Extend OpenCode session operations to run in the stage 1 worktree and auto-seed a stage-focused implementation prompt with reuse semantics.",
					"status": "not-started"
				},
				{
					"id": "stage-5",
					"title": "Start endpoint orchestration contract",
					"details": "Add POST start API that validates prerequisites, orchestrates worktree/session setup, updates statuses, and returns explicit created-versus-reused result flags.",
					"status": "not-started"
				},
				{
					"id": "stage-6",
					"title": "Feature detail UI start action integration",
					"details": "Add UI-only Start feature trigger with disabled/loading/success/error states and data refresh to reflect started and in-progress stage state.",
					"status": "not-started"
				},
				{
					"id": "stage-7",
					"title": "Validation matrix and quality gate",
					"details": "Verify fresh, resume, recovery, and failure scenarios, then complete typecheck and build gates before marking the feature ready.",
					"status": "not-started"
				}
			],
			"name": "branch creation",
			"notes": "when a feature has been created and the stages set up, I want to instruct the agent to “start” a feature at which point a new git worktree will be created and a new agent session started to immediately implement stage 1",
			"type": "feature"
		},
		{
			"id": "branch-diff-cpbrce",
			"status": "planned",
			"stages": [
				{
					"id": "stage-1",
					"title": "Diff domain and API contract",
					"details": "Define structured stage diff types, implement server diff resolution/parsing with previous-stage baseline logic, and expose GET /api/stacks/[id]/stages/[stageId]/diff with deterministic status/error mapping.",
					"status": "not-started"
				},
				{
					"id": "stage-2",
					"title": "Stage diffability metadata",
					"details": "Augment feature page server load with per-stage runtime metadata indicating whether a stage has a diffable branch/worktree and why it may be unavailable.",
					"status": "not-started"
				},
				{
					"id": "stage-3",
					"title": "Slide-out panel shell and fetch lifecycle",
					"details": "Add clickable behavior only for diffable stages, implement panel open/close mechanics, and wire lazy loading/error/empty handling for stage diff API calls.",
					"status": "not-started"
				},
				{
					"id": "stage-4",
					"title": "Structured side-by-side diff renderer",
					"details": "Build reusable Svelte diff components that render files, hunks, and paired lines side-by-side from structured payload data with stable per-line identifiers.",
					"status": "not-started"
				},
				{
					"id": "stage-5",
					"title": "UX polish and performance guardrails",
					"details": "Add file collapse/navigation, truncation safeguards for large diffs, keyboard/mobile panel behavior improvements, and optional syntax highlighting integration.",
					"status": "not-started"
				},
				{
					"id": "stage-6",
					"title": "Hardening and validation",
					"details": "Add unit and route-level tests for diff resolution and API statuses, verify edge-case handling, and run full typecheck/build validation.",
					"status": "not-started"
				},
				{
					"id": "stage-7",
					"title": "Immediate v2 line selection and AI chat",
					"details": "Implement line selection over stable diff line IDs and add a chat endpoint that accepts selected diff ranges to start focused AI discussion immediately after v1.",
					"status": "not-started"
				}
			],
			"name": "Branch diff",
			"notes": "I want to be able to view changes made in a branch/stage. The way I want this to work is that if I click on a stage in the feature page, a panel slides out showing a side-by-side git diff of the changes introduced by the stage's branch",
			"type": "feature"
		}
	],
	"planningSessions": [
		{
			"id": "session-pnd3eo32",
			"stackId": "branch-creation-1kda6g",
			"createdAt": "2026-02-19T19:25:54.639Z",
			"updatedAt": "2026-02-19T20:58:38.784Z",
			"opencodeSessionId": "ses_388a24fa9ffeCixBNFRS9ftByE",
			"seededAt": "2026-02-19T19:26:16.378Z",
			"savedPlanPath": ".stacked/plans/branch-creation-1kda6g.md",
			"savedStageConfigPath": ".stacked/plans/branch-creation-1kda6g.stages.json",
			"savedAt": "2026-02-19T20:58:38.784Z"
		},
		{
			"id": "session-e8g4p19b",
			"stackId": "branch-diff-cpbrce",
			"createdAt": "2026-02-19T21:53:16.100Z",
			"updatedAt": "2026-02-19T22:26:44.713Z",
			"opencodeSessionId": "ses_3881b66a8ffepKSRqggYbxRCwb",
			"savedPlanPath": ".stacked/plans/branch-diff-cpbrce.md",
			"savedStageConfigPath": ".stacked/plans/branch-diff-cpbrce.stages.json",
			"savedAt": "2026-02-19T22:26:44.713Z"
		}
	],
	"implementationSessions": []
}
